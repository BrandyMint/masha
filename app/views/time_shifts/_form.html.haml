= simple_form_for @time_shift, :html => { :class => 'time-shift-form', role: 'time_shift_form' } do |f|
  = f.error_notification
  .form-inputs
    .row
      .col-md-8.offset-md-3.col-sm-6.offset-sm-3
        .mb-3
          = f.label :date, class: 'form-label time-shift-form-label'
          .time-shift-form-input
            = f.input :date, :as => :date_picker, label: false, input_html: {class: 'form-control form-control-sm'}
        .mb-3
          = f.label :project, class: 'form-label time-shift-form-label'
          .time-shift-form-input
            = f.association :project, :include_blank => false, :collection => setable_projects_collection, label: false, input_html: {class: 'form-select form-select-sm'}
          -# = f.association :user, :include_blank => false, :collection => available_users_to_set_collection
        .mb-3
          = f.label :hours, class: 'form-label time-shift-form-label'
          .time-shift-form-input
            -# removed autofocus, because it hurts mobile experience
            = f.input :hours, as: :stepper, :input_html => {:min => 0.1, :max => 24, class: 'form-control form-control-sm' }, label: false
      .col-md-8.offset-md-3.col-sm-6.offset-sm-3
        .mb-3
          .time-shift-form-label
          .time-shift-form-input
            = f.input :description, :input_html => { :role => 'autosize', class: 'form-control form-control-sm' }, label: false
        .mb-3
          .time-shift-form-label
          .time-shift-form-button-submit
            .d-grid
              = button_tag type: 'submit', class: 'btn btn-primary btn-lg',
                :data => { 'disable-with' => t(:saving, :scope => [:simple_form, :button, :disable_with])} do
                = icon :ok, :white
                = t :create, :scope => [:helpers, :submit, :time_shift]
        .time-shift-form-label
        .time-shift-form-input
          .mb-3
            = f.button :button, :type=>:reset, :class => 'btn btn-link float-end' do
              Сбросить изменения
            .float-end
              - if @time_shift.present? && @time_shift.hours
                = TimeShiftDecorator.new(@time_shift).remove_link
            .clearfix

:coffee
  $form = $('@time_shift_form')
  $stepper_input = $form.find('@stepper input')
  App.reset_btn_hide $form, $form.find('button[type="reset"]')
  default_stepper_value = $stepper_input.val()
  $form.on 'reset', -> $stepper_input.attr 'value', default_stepper_value
