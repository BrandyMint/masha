# –ú–µ—Ç–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ Telegram Bot API: —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

> **–ê–≤—Ç–æ:** –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ gem `telegram-bot`
> **–î–∞—Ç–∞:** 2025-11-15

## –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤

| –ú–µ—Ç–æ–¥ | –î–ª—è —á–µ–≥–æ | –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è | –û—Ç–≤–µ—Ç | –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ |
|-------|----------|------------------|-------|---------------------------|
| **`answer_inline_query`** | –û—Ç–≤–µ—Ç –Ω–∞ inline-–∑–∞–ø—Ä–æ—Å (–ø–æ–∏—Å–∫ –≤ —á–∞—Ç–µ) | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç `@bot query` –≤ –ª—é–±–æ–º —á–∞—Ç–µ | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | 10—Å —Ç–∞–π–º–∞—É—Ç, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –ø–æ–∫–∞–∂—É—Ç—Å—è |
| **`answer_callback_query`** | –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ inline-–∫–Ω–æ–ø–∫–∏ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º | –û–±—è–∑–∞—Ç–µ–ª–µ–Ω | –ö–Ω–æ–ø–∫–∞ "–≤–∏—Å–∏—Ç" 30—Å —Å —á–∞—Å–∏–∫–∞–º–∏ |
| **`respond_with`** | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç | –û–±—ã—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ | –ù–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω | –ù–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ |
| **`reply_with`** | –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | –û–±—ã—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º | –ù–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω | –ù–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ |

---

## 1. `answer_inline_query` ‚Äî –û—Ç–≤–µ—Ç –Ω–∞ inline-–∑–∞–ø—Ä–æ—Å

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã inline-–∑–∞–ø—Ä–æ—Å–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç `@botname query` –≤ –ª—é–±–æ–º —á–∞—Ç–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø–æ–∏—Å–∫–µ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä—è–º–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

### –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–≤–æ–¥–∏—Ç—å `@bot_name` –≤ –ø–æ–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ—Ç—É `update` —Å —Ç–∏–ø–æ–º `inline_query`
- **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –ë–æ—Ç **–¥–æ–ª–∂–µ–Ω** –æ—Ç–≤–µ—Ç–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ **10 —Å–µ–∫—É–Ω–¥**, –∏–Ω–∞—á–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –ø–æ—è–≤—è—Ç—Å—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç:** –º–∞—Å—Å–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (articles, photos, videos, etc.)
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π):** —Ö–µ—à —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (`cache_time`, `is_personal`, `next_offset`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `inline_query_id` –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ update

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```ruby
def inline_query(query)
 results = [
   {
     type: :article,
     id: 'project_123',
     title: '–ü—Ä–æ–µ–∫—Ç: –ö–ª–∏–µ–Ω—Ç –ê',
     description: '15 —á–∞—Å–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é',
     input_message_content: {
       message_text: '/report client-a'
     },
     thumb_url: 'https://example.com/icon.png'
   },
   {
     type: :article,
     id: 'help',
     title: '–ü–æ–º–æ—â—å',
     input_message_content: {
       message_text: '/help'
     }
   }
 ]
 answer_inline_query(results, cache_time: 300)
end
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –æ—Ç–≤–µ—Ç–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ —Ç–∞–π–º–∞—É—Ç–∞
- Inline-—Ä–µ–∂–∏–º –±–æ—Ç–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## 2. `answer_callback_query` ‚Äî –û—Ç–≤–µ—Ç –Ω–∞ callback

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–∂–∞—Ç–∏—è inline-–∫–Ω–æ–ø–∫–∏. –£–±–∏—Ä–∞–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—é –∑–∞–≥—Ä—É–∑–∫–∏ ("—á–∞—Å–∏–∫–∏") —Å –∫–Ω–æ–ø–∫–∏.

### –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç inline-–∫–Ω–æ–ø–∫—É –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –±–æ—Ç–∞
- Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `update` —Å —Ç–∏–ø–æ–º `callback_query`
- **–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—Ç–∏—Ç—å, –∫–Ω–æ–ø–∫–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ **30 —Å–µ–∫—É–Ω–¥**

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π):** —Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π):** —Ö–µ—à —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (`show_alert: true`, `url: '...'`, `cache_time`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `callback_query_id`
- **–ö—Ä–∏—Ç–∏—á–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–æ–µ–∫—Ç–∞:** –î–û–õ–ñ–ï–ù –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –≤ –ö–ê–ñ–î–û–ú `*_callback_query` –º–µ—Ç–æ–¥–µ!

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```ruby
def projects_rename_callback_query(slug)
  project = find_project(slug)
  # ... –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è ...
  answer_callback_query('‚úÖ –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω')
end

def projects_delete_callback_query(slug)
  if delete_project(slug)
    answer_callback_query('üóëÔ∏è –ü—Ä–æ–µ–∫—Ç —É–¥–∞–ª–µ–Ω', show_alert: true)
  else
    answer_callback_query('‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è', show_alert: true)
  end
end

# –ë–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ —É–±—Ä–∞—Ç—å —á–∞—Å–∏–∫–∏)
def projects_list_callback_query
  show_projects_list
  answer_callback_query # –ø—Ä–æ—Å—Ç–æ –ø—É—Å—Ç–æ–π –≤—ã–∑–æ–≤
end
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –æ—Ç–≤–µ—Ç–∞
- –ö–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –∫—Ä—É—Ç–∏—Ç—å "—á–∞—Å–∏–∫–∏" –≤ —Ç–µ—á–µ–Ω–∏–µ 30 —Å–µ–∫—É–Ω–¥
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ
- Telegram –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å callback-–∑–∞–ø—Ä–æ—Å—ã
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## 3. `respond_with` ‚Äî –û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–∏–π —á–∞—Ç. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `chat_id` –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ update.

### –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/start`, `/help`)
- –í –æ—Ç–≤–µ—Ç –Ω–∞ –æ–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ö–æ–≥–¥–∞ –±–æ—Ç –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç:** —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (`:message`, `:photo`, `:document`, etc.)
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç:** —Ö–µ—à —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (`text`, `reply_markup`, `parse_mode`)
- **–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `chat_id: chat['id']`
- –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `reply_to_message_id`

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```ruby
def start!(word = nil)
  respond_with :message, text: "–ü—Ä–∏–≤–µ—Ç, #{from['first_name']}!"
end

def help!
  text = t('telegram.commands.help.text')
  respond_with :message, text: text, parse_mode: :markdown
end

def send_project_info(project)
  respond_with :message,
    text: project_info_text(project),
    reply_markup: project_keyboard(project)
end
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –≤—ã–∑–æ–≤–∞
- –ù–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ. –ë–æ—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–¥—É–º–∞—Ç—å, —á—Ç–æ –±–æ—Ç –∑–∞–≤–∏—Å

---

## 4. `reply_with` ‚Äî –û—Ç–≤–µ—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º). –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `chat_id` –∏ `reply_to_message_id`.

### –ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ–±—â–µ–Ω–∏—è
- –í –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è, –∫–æ–º—É –∞–¥—Ä–µ—Å–æ–≤–∞–Ω –æ—Ç–≤–µ—Ç

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- **–ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç:** —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è (`:message`, `:photo`, `:document`, etc.)
- **–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç:** —Ö–µ—à —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- **–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `chat_id: chat['id']`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `reply_to_message_id: payload['message_id']`
  - –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Telegram –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ "–æ—Ç–≤–µ—Ç" –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```ruby
def ask_confirmation!
  reply_with :message,
    text: '–í—ã —É–≤–µ—Ä–µ–Ω—ã? (–¥–∞/–Ω–µ—Ç)',
    reply_markup: { inline_keyboard: [[{ text: '–î–∞', callback_data: 'confirm:yes' }]] }
end

def show_user_profile!
  reply_with :photo,
    photo: profile_photo_url,
    caption: profile_text
end

# –í –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ ‚Äî –æ—Ç–≤–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
def mention_user!(username)
  reply_with :message, text: "@#{username}, –≤–∞—Å —É–ø–æ–º—è–Ω—É–ª–∏!"
end
```

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –±–µ–∑ –≤—ã–∑–æ–≤–∞
- –ù–∏—á–µ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ, –∫–∞–∫ –∏ —Å `respond_with`
- –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç–≤–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ê—Å–ø–µ–∫—Ç | `answer_inline_query` | `answer_callback_query` | `respond_with` | `reply_with` |
|--------|-----------------------|------------------------|----------------|--------------|
| **–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞** | `inline_query` | `callback_query` | `message` / `command` | `message` / `command` |
| **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ö—Ä–∏—Ç–∏—á–Ω–∞ | –í–∞–∂–Ω–∞ | –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ |
| **–¢–∞–π–º–∞—É—Ç Telegram** | 10 —Å–µ–∫—É–Ω–¥ | 30 —Å–µ–∫—É–Ω–¥ | –ù–µ—Ç | –ù–µ—Ç |
| **UI —ç—Ñ—Ñ–µ–∫—Ç** | –°–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | –£–±–∏—Ä–∞–µ—Ç "—á–∞—Å–∏–∫–∏" | –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ |
| **–ê–≤—Ç–æ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã** | `inline_query_id` | `callback_query_id` | `chat_id` | `chat_id`, `reply_to_message_id` |
| **–í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏** | ‚ùå –¢–∞–π–º–∞—É—Ç, –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ | ‚ùå –ó–∞–≤–∏—Å—à–∞—è –∫–Ω–æ–ø–∫–∞ | ‚úÖ –ù–∏—á–µ–≥–æ | ‚úÖ –ù–∏—á–µ–≥–æ |
| **–í –ø—Ä–æ–µ–∫—Ç–µ** | –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | **–û–ë–Ø–ó–ê–¢–ï–õ–ï–ù** –≤ –∫–∞–∂–¥–æ–º callback | –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –ò–Ω–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

---

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –î–µ–ª–∞–π—Ç–µ —Ç–∞–∫

1. **–í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ `answer_callback_query()` –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ `*_callback_query` –º–µ—Ç–æ–¥–∞**
   ```ruby
   def projects_rename_callback_query(slug)
     # ... –ª–æ–≥–∏–∫–∞ ...
     answer_callback_query('‚úÖ –ì–æ—Ç–æ–≤–æ')
   end
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `respond_with` –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**
   ```ruby
   def help!
     respond_with :message, text: t('help.text')
   end
   ```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `reply_with` –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω —è–≤–Ω—ã–π –æ—Ç–≤–µ—Ç**
   ```ruby
   def ask_question!
     reply_with :message, text: '–í–∞—à –æ—Ç–≤–µ—Ç?'
   end
   ```

4. **–ü–æ–º–Ω–∏—Ç–µ –ø—Ä–æ —Å—Ä–æ—á–Ω–æ—Å—Ç—å `answer_inline_query`**
   ```ruby
   def inline_query(query)
     # –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞!
     results = quickly_fetch_results(query)
     answer_inline_query(results)
   end
   ```

### ‚ùå –ù–µ –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫

1. **–ó–∞–±—ã–≤–∞—Ç—å `answer_callback_query`**
   ```ruby
   # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   def projects_rename_callback_query(slug)
     update_project(slug)
     # answer_callback_query –ø—Ä–æ–ø—É—â–µ–Ω!
   end
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –≤–º–µ—Å—Ç–æ —Ö–µ–ª–ø–µ—Ä–æ–≤**
   ```ruby
   # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   bot.send_message(chat_id: chat['id'], text: 'Hello')
   
   # ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
   respond_with :message, text: 'Hello'
   ```

3. **–î–µ–ª–∞—Ç—å —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ `inline_query`**
   ```ruby
   # ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
   def inline_query(query)
     sleep(5) # –î–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
     answer_inline_query(results) # –¢–∞–π–º–∞—É—Ç!
   end
   ```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: Callback —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
```ruby
# app/commands/projects_command.rb
def projects_rename_callback_query(slug)
  project = find_project(slug)
  if project
    save_context ProjectsCommand::RENAME_PROJECT_INPUT
    session[:rename_project_slug] = slug
    text = t('telegram.commands.projects.rename.enter_new_name')
    respond_with :message, text: text
    answer_callback_query('‚úèÔ∏è –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è')
  else
    answer_callback_query('‚ùå –ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', show_alert: true)
  end
end
```

### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ—Å—Ç–æ–π respond_with
```ruby
# app/commands/help_command.rb
def help!
  text = t('telegram.commands.help.text_header')
  respond_with :message, text: text, parse_mode: :markdown
end
```

### –ü—Ä–∏–º–µ—Ä 3: Reply —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
```ruby
def ask_confirmation!(action, data)
  keyboard = [
    [{ text: '‚úÖ –î–∞', callback_data: "confirm:#{action}:#{data}" }],
    [{ text: '‚ùå –ù–µ—Ç', callback_data: 'confirm:cancel' }]
  ]
  reply_with :message,
    text: '–í—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ?',
    reply_markup: { inline_keyboard: keyboard }
end
```

---

## –°—Å—ã–ª–∫–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Telegram Bot API: answerInlineQuery](https://core.telegram.org/bots/api#answerinlinequery)
- [Telegram Bot API: answerCallbackQuery](https://core.telegram.org/bots/api#answercallbackquery)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è telegram-bot gem](docs/development/gems/telegram-bot.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ callback'–∞–º](docs/development/telegram-callback-guide.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ—Ç–∞](docs/development/telegram-bot-architecture.md)

---

## –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ:

- [ ] –í—Å–µ `*_callback_query` –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç `answer_callback_query()`
- [ ] –í `answer_inline_query` –Ω–µ—Ç –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–±–æ–ª—å—à–µ 5 —Å–µ–∫—É–Ω–¥)
- [ ] –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `respond_with` –∏–ª–∏ `reply_with`
- [ ] –ù–∏–≥–¥–µ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `chat_id` –≤—Ä—É—á–Ω—É—é
- [ ] Callback-–¥–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (`:`)
- [ ] –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `callback_data` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥—ã

---

**–í–∞–∂–Ω–æ:** –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é [AGENTS.md](../../AGENTS.md). –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–æ–≤ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏ —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ.
